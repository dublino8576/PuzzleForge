<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="PuzzleForge is puzzle game to challenge your mind and have fun. The puzzle game features difficulty levels to suit all players!"
    />
    <!-- Favicon puzzle icon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png" />
    <link rel="manifest" href="site.webmanifest" />
    <title>PuzzleForge</title>
    <!-- Google Fonts to be present before Tailwind compiling-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Nunito:ital,wght@0,700;1,700&display=swap"
      rel="stylesheet"
    />
    <!--CSS input file-->
    <link rel="stylesheet" href="dist/assets/css/styles.css" />
  </head>
  <body class="dark:bg-dark-backdrop bg-light-medium min-h-screen p-6 md:px-14">
    <header class="container mx-auto py-6">
      <h1 class="text-4xl md:text-8xl text-center luckiest pb-3">
        PuzzleForge
      </h1>
      <p
        class="text-center bg-clip-text text-transparent bg-gradient-to-r to-purple-50 from-purple-400"
      >
        Crafted Challenges. Sharpened Minds.
      </p>
      <button
        id="theme-toggle"
        type="button"
        class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5"
        aria-label="Toggle light and dark mode"
      >
        <svg
          id="theme-toggle-dark-icon"
          class="hidden w-5 h-5"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
          ></path>
        </svg>
        <svg
          id="theme-toggle-light-icon"
          class="hidden w-5 h-5"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
            fill-rule="evenodd"
            clip-rule="evenodd"
          ></path>
        </svg>
      </button>
    </header>

    <main class="container flex flex-col items-center mx-auto md:gap-7">
      <!--Upload Section-->
      <section
        id="upload-section"
        class="w-full p-6 flex justify-center md:justify-start hidden"
      >
        <h2 class="sr-only">Upload your own image for puzzle creation</h2>
        <div class="flex items-center justify-center w-50 md:w-75">
          <div
            class="flex flex-col items-center justify-center w-full h-48 bg-neutral-secondary-medium dark:bg-dark-soft border border-dashed border-default-strong rounded-base px-3"
          >
            <div
              class="flex flex-col items-center justify-center text-body pt-5 pb-6"
            >
              <svg
                class="w-8 h-8 mb-4 dark:text-white"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                fill="none"
                viewBox="0 0 24 24"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 5v9m-5 0H5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-2M8 9l4-5 4 5m1 8h.01"
                />
              </svg>
              <p
                class="mb-2 text-sm text-wrap text-center sm:text-left dark:text-white"
              >
                Use your own image for puzzle creation!
              </p>
              <p class="text-xs mb-4 dark:text-white">
                Max. File Size: <span class="font-semibold">30MB</span>
              </p>
              <!-- Upload Button -->
              <button
                type="button"
                onclick="document.getElementById('dropzone-file-2').click()"
                class="inline-flex items-center text-white bg-gradient-to-br from-purple-600 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-base text-sm px-4 py-2.5 text-center leading-5"
              >
                <svg
                  class="w-4 h-4 me-1.5"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-width="2"
                    d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"
                  />
                </svg>
                Browse file
              </button>
            </div>
          </div>
          <!-- Hidden File Input (Outside Label) -->
          <input id="dropzone-file-2" type="file" class="hidden" />
        </div>
      </section>

      <section
        id="puzzle-section"
        class="w-[80vw] h-[80vh] py-6 flex justify-center items-center mx-auto"
      >
        <!-- Instructions for screen readers, sr-only is used to hide content visually but keep it accessible shorthand class to make it tiny but accessible -->
        <h2 id="puzzle-instructions" class="sr-only">
          Puzzle Area Instructions: Drag puzzle pieces to match the background
          image. Pieces snap into place when positioned correctly.
        </h2>
        <canvas
          style="width: 100%; height: 100%"
          id="puzzle-canvas"
          class="my-4 border-4 border-purple-600 rounded-2xl"
          role="application"
          aria-label="Interactive puzzle game canvas"
        >
          <!-- Fallback text for browsers that do not support canvas, loads when graphics don't render -->
          Your browser doesn't support HTML5 canvas. Please use a modern browser
          to play PuzzleForge.
        </canvas>
      </section>

      <div class="flex w-full flex-col gap-3 md:flex-row">
        <section
          id="start-game-section"
          class="flex max-h-24 justify-center flex-1 p-6"
        >
          <h2 class="sr-only">Start a new game</h2>
          <button
            id="new-game-button"
            class="relative inline-flex items-center justify-center px-8 py-2.5 overflow-hidden tracking-tighter text-white bg-gray-800 rounded-md group cursor-pointer"
          >
            <span
              class="absolute w-0 h-0 transition-all duration-500 ease-out bg-orange-600 rounded-full group-hover:w-56 group-hover:h-56"
            ></span>
            <span class="absolute bottom-0 left-0 h-full -ml-2">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-auto h-full opacity-100 object-stretch"
                viewBox="0 0 487 487"
              >
                <path
                  fill-opacity=".1"
                  fill-rule="nonzero"
                  fill="#FFF"
                  d="M0 .3c67 2.1 134.1 4.3 186.3 37 52.2 32.7 89.6 95.8 112.8 150.6 23.2 54.8 32.3 101.4 61.2 149.9 28.9 48.4 77.7 98.8 126.4 149.2H0V.3z"
                ></path>
              </svg>
            </span>
            <span class="absolute top-0 right-0 w-12 h-full -mr-3">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="object-cover w-full h-full"
                viewBox="0 0 487 487"
              >
                <path
                  fill-opacity=".1"
                  fill-rule="nonzero"
                  fill="#FFF"
                  d="M487 486.7c-66.1-3.6-132.3-7.3-186.3-37s-95.9-85.3-126.2-137.2c-30.4-51.8-49.3-99.9-76.5-151.4C70.9 109.6 35.6 54.8.3 0H487v486.7z"
                ></path>
              </svg>
            </span>
            <span
              class="absolute inset-0 w-full h-full -mt-1 rounded-lg opacity-30 bg-gradient-to-b from-transparent via-transparent to-gray-200"
            ></span>
            <span class="relative text-base font-semibold">New Game</span>
          </button>
        </section>
        <section id="settings-section" class="flex flex-1 justify-center p-6">
          <h2 class="sr-only">Choose the difficulty level you want to play</h2>
          <div
            id="difficulty-level-group"
            class="flex md:space-x-2 border-[3px] border-purple-400 rounded-xl select-none max-w-64 bg-dark-backdrop"
          >
            <label
              class="radio flex flex-grow items-center justify-center rounded-lg p-1 cursor-pointer"
            >
              <input
                type="radio"
                name="radio"
                value="easy"
                class="peer hidden difficulty-level"
                checked=""
              />
              <span
                class="tracking-widest peer-checked:bg-gradient-to-r peer-checked:from-[blueviolet] peer-checked:to-[violet] peer-checked:text-white dark:text-white text-gray-700 px-1 py-2 rounded-lg transition duration-150 ease-in-out"
                >Easy</span
              >
            </label>

            <label
              class="radio flex flex-grow items-center justify-center rounded-lg p-1 cursor-pointer"
            >
              <input
                type="radio"
                name="radio"
                value="normal"
                class="peer hidden difficulty-level"
              />
              <span
                class="tracking-widest peer-checked:bg-gradient-to-r peer-checked:from-[blueviolet] peer-checked:to-[violet] peer-checked:text-white dark:text-white text-gray-700 py-2 px-1 rounded-lg transition duration-150 ease-in-out"
                >Normal</span
              >
            </label>

            <label
              class="radio flex flex-grow items-center justify-center rounded-lg p-1 cursor-pointer"
            >
              <input
                type="radio"
                name="radio"
                value="hard"
                class="peer hidden difficulty-level"
              />
              <span
                class="tracking-widest peer-checked:bg-gradient-to-r peer-checked:from-[blueviolet] peer-checked:to-[violet] peer-checked:text-white text-gray-700 dark:text-white px-1 py-2 rounded-lg transition duration-150 ease-in-out"
                >Hard</span
              >
            </label>
          </div>
        </section>
      </div>
      <section
        id="achievements-section"
        class="dark:text-white text-black mr-auto flex-1 p-6 hidden"
      >
        <h2 class="text-2xl md:text-5xl pb-3">Achievements</h2>
        <ul>
          <li class="mb-2">üèÜ First Puzzle Completed</li>
          <li class="mb-2">
            ‚è±Ô∏è Speedster: Complete a puzzle in under 5 minutes
          </li>
          <li class="mb-2">üß© Puzzle Master: Complete 10 puzzles</li>
          <li class="mb-2">
            üåü Daily Streak: Complete a puzzle every day for a week
          </li>
          <li class="mb-2">
            üé® Custom Creator: Upload and complete your own image puzzle
          </li>
        </ul>
      </section>
    </main>

    <script src="./node_modules/flowbite/dist/flowbite.min.js"></script>

    <!-- Game Script with module type to be able to use ES6 imports -->
    <script type="module" src="assets/js/game.js"></script>

    <script>
      /* Set the initial theme on page load */
      if (
        localStorage.getItem("color-theme") === "dark" ||
        (!("color-theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }
    </script>
    <script>
      var themeToggleDarkIcon = document.getElementById(
        "theme-toggle-dark-icon",
      );
      var themeToggleLightIcon = document.getElementById(
        "theme-toggle-light-icon",
      );

      // Change the icons inside the button based on previous settings
      if (
        localStorage.getItem("color-theme") === "dark" ||
        (!("color-theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        themeToggleLightIcon.classList.remove("hidden");
      } else {
        themeToggleDarkIcon.classList.remove("hidden");
      }

      var themeToggleBtn = document.getElementById("theme-toggle");

      themeToggleBtn.addEventListener("click", function () {
        // toggle icons inside button
        themeToggleDarkIcon.classList.toggle("hidden");
        themeToggleLightIcon.classList.toggle("hidden");

        // if set via local storage previously
        if (localStorage.getItem("color-theme")) {
          if (localStorage.getItem("color-theme") === "light") {
            document.documentElement.classList.add("dark");
            localStorage.setItem("color-theme", "dark");
          } else {
            document.documentElement.classList.remove("dark");
            localStorage.setItem("color-theme", "light");
          }

          // if NOT set via local storage previously
        } else {
          if (document.documentElement.classList.contains("dark")) {
            document.documentElement.classList.remove("dark");
            localStorage.setItem("color-theme", "light");
          } else {
            document.documentElement.classList.add("dark");
            localStorage.setItem("color-theme", "dark");
          }
        }
      });
    </script>
  </body>
</html>
